/**
 * 年
 */
var yeardata = [ {
	"id" : "*",
	"text" : "*",
	"selected" : true
}, {
	"id" : "2015",
	"text" : "2015"
}, {
	"id" : "2016",
	"text" : "2016"
}, {
	"id" : "2017",
	"text" : "2017",
}, {
	"id" : "2018",
	"text" : "2018"
}, {
	"id" : "2019",
	"text" : "2019"
}, {
	"id" : "2020",
	"text" : "2020"
}, {
	"id" : "2021",
	"text" : "2021"
}, {
	"id" : "2022",
	"text" : "2022"
}, {
	"id" : "2023",
	"text" : "2023"
}, {
	"id" : "2024",
	"text" : "2024"
} ]

/**
 * 月
 */
var monthdata = [ {
	"id" : "*",
	"text" : "*",
	"selected" : true
}, {
	"id" : "1",
	"text" : "1"
}, {
	"id" : "2",
	"text" : "2"
}, {
	"id" : "3",
	"text" : "3",
}, {
	"id" : "4",
	"text" : "4"
}, {
	"id" : "5",
	"text" : "5"
}, {
	"id" : "6",
	"text" : "6"
}, {
	"id" : "7",
	"text" : "7"
}, {
	"id" : "8",
	"text" : "8"
}, {
	"id" : "9",
	"text" : "9"
}, {
	"id" : "10",
	"text" : "10"
}, {
	"id" : "11",
	"text" : "11"
}, {
	"id" : "12",
	"text" : "12"
} ]

/**
 * 日
 */
var daydata = [ {
	"id" : "*",
	"text" : "*",
	"selected" : true
}, {
	"id" : "1",
	"text" : "1"
}, {
	"id" : "2",
	"text" : "2"
}, {
	"id" : "3",
	"text" : "3",
}, {
	"id" : "4",
	"text" : "4"
}, {
	"id" : "5",
	"text" : "5"
}, {
	"id" : "6",
	"text" : "6"
}, {
	"id" : "7",
	"text" : "7"
}, {
	"id" : "8",
	"text" : "8"
}, {
	"id" : "9",
	"text" : "9"
}, {
	"id" : "10",
	"text" : "10"
}, {
	"id" : "11",
	"text" : "11"
}, {
	"id" : "12",
	"text" : "12"
}, {
	"id" : "13",
	"text" : "13",
}, {
	"id" : "14",
	"text" : "14"
}, {
	"id" : "15",
	"text" : "15"
}, {
	"id" : "16",
	"text" : "16"
}, {
	"id" : "17",
	"text" : "17"
}, {
	"id" : "18",
	"text" : "18"
}, {
	"id" : "19",
	"text" : "19"
}, {
	"id" : "20",
	"text" : "20"
}, {
	"id" : "21",
	"text" : "21"
}, {
	"id" : "22",
	"text" : "22"
}, {
	"id" : "23",
	"text" : "23",
}, {
	"id" : "24",
	"text" : "24"
}, {
	"id" : "25",
	"text" : "25"
}, {
	"id" : "26",
	"text" : "26"
}, {
	"id" : "27",
	"text" : "27"
}, {
	"id" : "28",
	"text" : "28"
}, {
	"id" : "29",
	"text" : "29"
}, {
	"id" : "30",
	"text" : "30"
}, {
	"id" : "31",
	"text" : "31"
} ]

/**
 * 时
 */
var hourdata = [ {
	"id" : "*",
	"text" : "*",
	"selected" : true
}, {
	"id" : "0",
	"text" : "0"
}, {
	"id" : "1",
	"text" : "1"
}, {
	"id" : "2",
	"text" : "2"
}, {
	"id" : "3",
	"text" : "3",
}, {
	"id" : "4",
	"text" : "4"
}, {
	"id" : "5",
	"text" : "5"
}, {
	"id" : "6",
	"text" : "6"
}, {
	"id" : "7",
	"text" : "7"
}, {
	"id" : "8",
	"text" : "8"
}, {
	"id" : "9",
	"text" : "9"
}, {
	"id" : "10",
	"text" : "10"
}, {
	"id" : "11",
	"text" : "11"
}, {
	"id" : "12",
	"text" : "12"
}, {
	"id" : "13",
	"text" : "13",
}, {
	"id" : "14",
	"text" : "14"
}, {
	"id" : "15",
	"text" : "15"
}, {
	"id" : "16",
	"text" : "16"
}, {
	"id" : "17",
	"text" : "17"
}, {
	"id" : "18",
	"text" : "18"
}, {
	"id" : "19",
	"text" : "19"
}, {
	"id" : "20",
	"text" : "20"
}, {
	"id" : "21",
	"text" : "21"
}, {
	"id" : "22",
	"text" : "22"
}, {
	"id" : "23",
	"text" : "23",
} ]

/**
 * 分
 */
var minutedata = [ {
	"id" : "*",
	"text" : "*",
	"selected" : true
}, {
	"id" : "0",
	"text" : "0"
}, {
	"id" : "1",
	"text" : "1"
}, {
	"id" : "2",
	"text" : "2"
}, {
	"id" : "3",
	"text" : "3",
}, {
	"id" : "4",
	"text" : "4"
}, {
	"id" : "5",
	"text" : "5"
}, {
	"id" : "6",
	"text" : "6"
}, {
	"id" : "7",
	"text" : "7"
}, {
	"id" : "8",
	"text" : "8"
}, {
	"id" : "9",
	"text" : "9"
}, {
	"id" : "10",
	"text" : "10"
}, {
	"id" : "11",
	"text" : "11"
}, {
	"id" : "12",
	"text" : "12"
}, {
	"id" : "13",
	"text" : "13",
}, {
	"id" : "14",
	"text" : "14"
}, {
	"id" : "15",
	"text" : "15"
}, {
	"id" : "16",
	"text" : "16"
}, {
	"id" : "17",
	"text" : "17"
}, {
	"id" : "18",
	"text" : "18"
}, {
	"id" : "19",
	"text" : "19"
}, {
	"id" : "20",
	"text" : "20"
}, {
	"id" : "21",
	"text" : "21"
}, {
	"id" : "22",
	"text" : "22"
}, {
	"id" : "23",
	"text" : "23",
}, {
	"id" : "24",
	"text" : "24"
}, {
	"id" : "25",
	"text" : "25"
}, {
	"id" : "26",
	"text" : "26"
}, {
	"id" : "27",
	"text" : "27"
}, {
	"id" : "28",
	"text" : "28"
}, {
	"id" : "29",
	"text" : "29"
}, {
	"id" : "30",
	"text" : "30"
}, {
	"id" : "31",
	"text" : "31"
}, {
	"id" : "32",
	"text" : "32"
}, {
	"id" : "33",
	"text" : "33",
}, {
	"id" : "34",
	"text" : "34"
}, {
	"id" : "35",
	"text" : "35"
}, {
	"id" : "36",
	"text" : "36"
}, {
	"id" : "37",
	"text" : "37"
}, {
	"id" : "38",
	"text" : "38"
}, {
	"id" : "39",
	"text" : "39"
}, {
	"id" : "40",
	"text" : "40"
}, {
	"id" : "41",
	"text" : "41"
}, {
	"id" : "42",
	"text" : "42"
}, {
	"id" : "43",
	"text" : "43",
}, {
	"id" : "44",
	"text" : "44"
}, {
	"id" : "45",
	"text" : "45"
}, {
	"id" : "46",
	"text" : "46"
}, {
	"id" : "47",
	"text" : "47"
}, {
	"id" : "48",
	"text" : "48"
}, {
	"id" : "49",
	"text" : "49"
}, {
	"id" : "50",
	"text" : "50"
}, {
	"id" : "51",
	"text" : "51"
}, {
	"id" : "52",
	"text" : "52"
}, {
	"id" : "53",
	"text" : "53",
}, {
	"id" : "54",
	"text" : "54"
}, {
	"id" : "55",
	"text" : "55"
}, {
	"id" : "56",
	"text" : "56"
}, {
	"id" : "57",
	"text" : "57"
}, {
	"id" : "58",
	"text" : "58"
}, {
	"id" : "59",
	"text" : "59"
} ]

$(function() {
	/**
	 * 审计任务表格
	 */

	$('#audit_grid').datagrid({
		url : ctx + "/cmdbmanage/CmdbManageAction!GetAuditGridData.shtml",
		singleSelect : true,
		pagination : true,
		rownumbers : true,
		fit : true,
		border : false,
		queryParams : {
			task : "searchTriggersWithDataMap",
			jobName : "审计任务",
			jobGroup : "CMDB项目",
			triggerName : $('#sel_name').textbox('getText'),
			triggerDescription : $('#sel_describe').textbox('getText')
		},
		toolbar : [ {
			iconCls : 'dynamic-tbar-icon-add',
			text : "添加",
			handler : function() {
				$('#audit_add_win').window({
					title : '添加审计任务',
					iconCls : 'dynamic-tbar-icon-add'
				});
				$('#btn-div').show();
				$('#audit_add_win').window('open');
				ATMfn.ResetAuditTask();
			}
		}, {
			iconCls : 'dynamic-tbar-icon-see',
			text : "查看",
			handler : function() {
				ATMfn.SeeAuditTask();
			}
		}, {
			iconCls : 'dynamic-tbar-icon-network',
			text : "暂停",
			handler : function() {
				ATMfn.AuditTaskPauseResumeRemove("pause");
			}
		}, {
			iconCls : 'dynamic-tbar-icon-select',
			text : "恢复",
			handler : function() {
				ATMfn.AuditTaskPauseResumeRemove("resume");
			}
		}, {
			iconCls : 'dynamic-tbar-icon-delete',
			text : "删除",
			handler : function() {
				ATMfn.AuditTaskDelete("remove");
			}
		}, {
			iconCls : 'dynamic-tbar-icon-see',
			text : "查看任务执行情况",
			handler : function() {
				ATMfn.SeeAuditTaskExecutionSituation();
			}
		} ],
		columns : [ [ {
			field : 'apdrows',
			hidden : true
		}, {
			field : 'wapdrows',
			hidden : true
		}, {
			field : 'triggerGroupName',
			hidden : true
		}, {
			field : 'name',
			title : '调度名称',
			width : 150,
			align : 'center'
		}, {
			field : 'auditproject',
			title : '审计项',
			width : 200,
			align : 'center'
		}, {
			field : 'samplingrange',
			title : '抽样范围',
			width : 100,
			align : 'center'
		}, {
			field : 'executioncycle',
			title : '触发规则',
			width : 150,
			align : 'center'
		}, {
			field : 'status',
			title : '状态',
			width : 100,
			align : 'center'
		}, {
			field : 'describe',
			title : '描述',
			width : 300,
			align : 'center'
		} ] ],
		loadFilter : function(data) {
			var griddata = {
				"total" : 0,
				"rows" : []
			};
			griddata.total = data.total;
			for (var i = 0; i < data.data.length; i++) {
				var row = {
					"name" : "",
					"auditproject" : "",
					"samplingrange" : "",
					"executioncycle" : "",
					"describe" : "",
					"wapdrows" : "",
					"apdrows" : "",
					"status" : "",
					"triggerGroupName" : ""
				};
				var obj = data.data[i];
				row.name = obj.trigger_name;

				row.executioncycle = obj.cron_expression;
				row.status = obj.status;
				row.triggerGroupName = obj.trigger_group;
				for (var j = 0; j < obj.dataMap.length; j++) {
					var map = obj.dataMap[j];
					if (map.dataName == 'apdnames') {
						row.auditproject = map.dataValue;
					} else if (map.dataName == 'samplingrange') {
						row.samplingrange = map.dataValue;
					} else if (map.dataName == 'apdrows') {
						row.apdrows = map.dataValue;
					} else if (map.dataName == 'wapdrows') {
						row.wapdrows = map.dataValue;
					} else if (map.dataName == 'describe') {
						row.describe = map.dataValue;
					}
				}
				griddata.rows.push(row);
			}
			return griddata;
		}
	});

	$('#audit_add_win').window({
		width : 560,
		height : 480,
		modal : true,
		collapsible : false,
		minimizable : false,
		maximizable : false
	});

	$('#year').combobox({
		width : "80",
		panelHeight : "80",
		valueField : 'id',
		textField : 'text'
	});

	$('#month').combobox({
		width : "50",
		panelHeight : "80",
		valueField : 'id',
		textField : 'text'
	});

	$('#day').combobox({
		width : "50",
		panelHeight : "80",
		valueField : 'id',
		textField : 'text'
	});

	$('#hour').combobox({
		width : "50",
		panelHeight : "80",
		valueField : 'id',
		textField : 'text'
	});

	$('#minute').combobox({
		width : "50",
		panelHeight : "80",
		valueField : 'id',
		textField : 'text'
	});

	$('#minute').combobox('loadData', minutedata);
	$('#hour').combobox('loadData', hourdata);
	$('#day').combobox('loadData', daydata);
	$('#month').combobox('loadData', monthdata);
	$('#year').combobox('loadData', yeardata);

	$('#audit_add_win').window('close');
	// ATMfn.AuditTaskGridDataLoad();

	var width = document.body.offsetWidth > 600 ? 600 : document.body.offsetWidth - 50;
	var height = document.body.offsetHeight > 350 ? 350 : document.body.offsetHeight - 50;

	$('#execution_situation_win').window({
		title : '查看审计任务执行情况',
		width : width,
		height : height,
		modal : true,
		collapsible : false,
		minimizable : false,
		maximizable : false
	});
	$('#execution_situation_win').window('close');

});

var ATMfn = {
	/**
	 * 加载审计Grid表格数据
	 */
	AuditTaskGridDataLoad : function() {
		$('#audit_grid').datagrid('load', {
			task : "searchTriggersWithDataMap",
			jobName : '审计任务',
			jobGroup : 'CMDB项目',
			triggerName : $('#sel_name').textbox('getText'),
			triggerDescription : $('#sel_describe').textbox('getText')
		});
	},

	/**
	 * 审计任务查询
	 */
	QueryAuditTask : function() {
		ATMfn.AuditTaskGridDataLoad();
	},
	/**
	 * 清空查询条件
	 */
	ClearAuditTask : function() {
		$('#sel_name').textbox('clear');
		$('#sel_describe').textbox('clear');
	},
	/**
	 * 重置
	 */
	ResetAuditTask : function() {
		$('#name').textbox('clear');
		$('#describe').textbox('clear');
		$('#minute').combobox('setValue', "*");
		$('#hour').combobox('setValue', "*");
		$('#day').combobox('setValue', "*");
		$('#month').combobox('setValue', "*");
		$('#year').combobox('setValue', "*");
		$('#samplingrange').combobox('setValue', "20%");
		// 审计项数数表格
		var AuditProjectGriddata = [ {
			"id" : "9000000002",
			"name" : "PC服务器"
		}, {
			"id" : "9000000001",
			"name" : "小型机"
		}, {
			"id" : "9000000016",
			"name" : "数据库"
		} ];
		$('#wait_audit_project_grid').datagrid('loadData', AuditProjectGriddata);
		var data = [];
		$('#audit_project_grid').datagrid('loadData', data);
	},
	/**
	 * 添加审计项目
	 */
	AddAuditProject : function() {
		var rows = $('#wait_audit_project_grid').datagrid('getSelections');
		if (rows.length > 0) {
			for (var i = 0; i < rows.length; i++) {
				var row = rows[i];
				var inddex = $('#wait_audit_project_grid').datagrid("getRowIndex", row)
				$('#wait_audit_project_grid').datagrid("deleteRow", inddex);
				$('#audit_project_grid').datagrid('appendRow', row);
			}
		} else {
			$.messager.alert('系统提示', '请选择记录后，再操作!', 'info');
		}
	},
	/**
	 * 删除审计项目
	 */
	DelAuditProject : function() {
		var rows = $('#audit_project_grid').datagrid('getSelections');
		if (rows.length > 0) {
			for (var i = 0; i < rows.length; i++) {
				var row = rows[i];
				var inddex = $('#audit_project_grid').datagrid("getRowIndex", row)
				$('#audit_project_grid').datagrid("deleteRow", inddex);
				$('#wait_audit_project_grid').datagrid('appendRow', row);
			}
		} else {
			$.messager.alert('系统提示', '请选择记录后，再操作!', 'info');
		}
	},
	/**
	 * 添加审计任务
	 */
	AddAuditTask : function() {
		var triggerName = $('#name').textbox('getText');
		if (triggerName == "") {
			$.messager.alert('系统提示', '任务调度名称不能为空!', 'info');
			return false;
		}
		var apdnames = "";
		var apdspecids = "";
		var apdrows = $('#audit_project_grid').datagrid('getData');
		if (apdrows.total == 0) {
			$.messager.alert('系统提示', '审计项目不能为空!', 'info');
			return false;
		}
		for (var i = 0; i < apdrows.total; i++) {
			var row = apdrows.rows[i];
			if (i == 0) {
				apdnames = row.name;
				apdspecids = row.id;
			} else {
				apdnames = apdnames + "," + row.name;
				apdspecids = apdspecids + "," + row.id;
			}
		}
		// var wapdnames = "";
		var wapdrows = $('#wait_audit_project_grid').datagrid('getData');
		// for (var i = 0; i < wapdrows.total; i++) {
		// var row = wapdrows.rows[i];
		// if (i == 0) {
		// wapdnames = row.name;
		// } else {
		// wapdnames = wapdnames + "," + row.name
		// }
		// }

		// CRON表达式: 0/5 * * * * ? *
		var cronExpression = "0";

		var minute = $('#minute').combo('getValue');

		if (minute != "") {
			cronExpression = cronExpression + " " + minute;
		} else {
			cronExpression = cronExpression + " *";
		}

		var hour = $('#hour').combo('getValue');
		if (hour != "") {
			cronExpression = cronExpression + " " + hour;
		} else {
			cronExpression = cronExpression + " *";
		}

		var day = $('#day').combo('getValue');
		if (day != "") {
			cronExpression = cronExpression + " " + day;
		} else {
			cronExpression = cronExpression + " *";
		}

		var month = $('#month').combo('getValue');
		if (month != "") {
			cronExpression = cronExpression + " " + month;
		} else {
			cronExpression = cronExpression + " *";
		}

		var year = $('#year').combo('getValue');
		if (year != "") {
			cronExpression = cronExpression + " ? " + year;
		} else {
			cronExpression = cronExpression + " ? *";
		}

		var samplingrange = $('#samplingrange').combo('getValue');

		var describe = $('#describe').textbox('getText');

		var paramojb = {
			jobName : '审计任务',
			jobGroup : 'CMDB项目',
			cronExpression : cronExpression,
			startDateTime : '',
			endDateTime : '',
			triggerName : triggerName,
			triggerGroup : 'CMDB项目',
			description : "",
			triggerType : 'cronTrigger',
			dataMaps : [ {
				dataName : 'apdnames',
				dataValue : apdnames
			}, {
				dataName : 'apdrows',
				dataValue : apdrows
			}, {
				dataName : 'wapdrows',
				dataValue : wapdrows
			}, {
				dataName : "samplingrange",
				dataValue : samplingrange
			}, {
				dataName : "describe",
				dataValue : describe
			},{
				dataName : "apdspecids",
				dataValue : apdspecids
			} ]
		};
		var jobCronTriggerJson = JSON.stringify(paramojb);
		$.ajax({
			url : ctx + "/cmdbmanage/CmdbManageAction!AddAuditTask.shtml",
			// url : 'http://192.168.0.126:8080/scheduler/trigger.shtml',
			dataType : 'json',
			type : 'post',
			data : {
				task : "newJobCronTrigger",
				jobCronTriggerJson : jobCronTriggerJson
			},
			success : function(data, textStatus, jqXHR) {
				if (data.success) {
					$('#audit_add_win').window('close');
					ATMfn.AuditTaskGridDataLoad();
					$.messager.alert('系统提示', '添加成功!', 'info');
				} else {
					$.messager.alert('系统提示', data.message, 'error');
				}
			},
			error : function(XMLHttpRequest, textStatus, errorThrown) {
				$.messager.alert('系统提示', '加载数据出错!', 'error');
			}
		});

	},
	/**
	 * 查看审计信息
	 */
	SeeAuditTask : function() {
		var rows = $('#audit_grid').datagrid('getSelections');
		if (rows.length == 1) {
			$('#audit_add_win').window({
				title : '查看审计任务',
				iconCls : 'dynamic-tbar-icon-see'
			});
			ATMfn.ResetAuditTask();
			$('#audit_add_win').window('open');
			$('#btn-div').hide();
			var name = rows[0].name;
			var auditproject = rows[0].auditproject;
			var samplingrange = rows[0].samplingrange;
			var executioncycle = rows[0].executioncycle;
			var arr = executioncycle.split(" ");
			var describe = rows[0].describe;
			var wapdrows = JSON.parse(rows[0].wapdrows);
			var apdrows = JSON.parse(rows[0].apdrows);

			$('#name').textbox('setText', name);
			$('#describe').textbox('setText', describe);
			$('#minute').combobox('setValue', arr[1]);
			$('#hour').combobox('setValue', arr[2]);
			$('#day').combobox('setValue', arr[3]);
			$('#month').combobox('setValue', arr[4]);
			$('#year').combobox('setValue', arr[6]);

			$('#samplingrange').combobox('setValue', samplingrange);

			$('#wait_audit_project_grid').datagrid('loadData', wapdrows);
			$('#audit_project_grid').datagrid('loadData', apdrows);
		} else {
			$.messager.alert('系统提示', '请选择一条记录，再进行查看!', 'error');
		}
	},
	/**
	 * 查看审计任务执行情况
	 */
	SeeAuditTaskExecutionSituation : function() {
		var rows = $('#audit_grid').datagrid('getSelections');
		if (rows.length == 1) {
			$('#execution_situation_win').window('open');

			$('#execution_situation_grid').datagrid({
				url : ctx + "/cmdbmanage/CmdbManageAction!GetExecutionSituationGridData.shtml",
				rownumbers : true,
				fit : true,
				border : false,
				pagination : true,
				fitColumns : true,
				singleSelect : true,
				queryParams : {
					task : "searchJobTriggerLogs",
					triggerName : rows[0].name,
					triggerGroup : ""
				},
				columns : [ [ {
					field : 'fired_datetime',
					title : '触发时间',
					width : 150,
					align : 'center'
				}, {
					field : 'complete_datetime',
					title : '完成时间',
					width : 150,
					align : 'center'
				}, {
					field : 'misfired',
					title : '跳失信息',
					width : 80,
					align : 'center'
				}, {
					field : 'exception_message',
					title : '异常信息',
					width : 200,
					align : 'center'
				} ] ],
				loadFilter : function(data) {
					// var objdata = eval('(' + data + ')');
					var griddata = {
						"total" : 0,
						"rows" : []
					};
					griddata.total = data.total;
					griddata.rows = data.data;
					return griddata;
				}
			});
		} else {
			$.messager.alert('系统提示', '请选择一条记录在再行查看!', 'info');
		}

	},
	/**
	 * 暂停,恢复,删除
	 */
	AuditTaskPauseResumeRemove : function(type) {
		var rows = $('#audit_grid').datagrid('getSelections');
		if (rows.length == 1) {
			var paramObj = {
				"task" : "",
				"jobTriggerName" : rows[0].name,
				"jobTriggerGroup" : rows[0].triggerGroupName
			};
			if (type == 'pause') {
				paramObj.task = "pauseJobTriggerByTriggerNameAndGroup";
			} else if (type == 'resume') {
				paramObj.task = "resumeJobTriggerByTriggerNameAndGroup";
			} else if (type == "remove") {
				paramObj.task = "removeJobTriggerByTriggerNameAndGroup";
			}
			$.ajax({
				url : ctx + "/cmdbmanage/CmdbManageAction!PauseResumeRemoveAuditTask.shtml",
				// url : 'http://192.168.0.126:8080/scheduler/control.shtml',
				dataType : 'json',
				type : 'post',
				data : paramObj,
				success : function(data, textStatus, jqXHR) {
					if (data.isSuccess) {
						if (type == 'pause') {
							$.messager.alert('系统提示', "[" + rows[0].name + "]任务暂停成功！", 'info');
						} else if (type == 'resume') {
							$.messager.alert('系统提示', "[" + rows[0].name + "]任务恢复成功！", 'info');
						} else if (type == "remove") {
							$.messager.alert('系统提示', "[" + rows[0].name + "]任务删除成功！", 'info');
						}
						ATMfn.AuditTaskGridDataLoad();
					} else {
						$.messager.alert('系统提示', data.message, 'error');
					}
				},
				error : function(XMLHttpRequest, textStatus, errorThrown) {
					$.messager.alert('系统提示', '加载数据出错!', 'error');
				}
			});
		} else {
			$.messager.alert('系统提示', '请选择一条记录在再行操作!', 'info');
		}

	},
	/**
	 * 添加提示
	 */
	AuditTaskDelete : function(type) {
		var rows = $('#audit_grid').datagrid('getSelections');
		if (rows.length == 1) {
			$.messager.confirm('确认', '您确认想要删除记录吗？', function(r) {
				if (r) {
					ATMfn.AuditTaskPauseResumeRemove(type);
				}
			});
		} else {
			$.messager.alert('系统提示', '请选择一条记录在再行操作!', 'info');
		}
	}
}
